!function(a){a.fn.circleMagic=function(b){function k(){var a,b;for(c=j.offsetWidth,d=j.offsetHeight,l(),e=document.getElementById("homeTopCanvas"),e.width=c,e.height=d,e.style.position="absolute",e.style.left="0",e.style.bottom="0",f=e.getContext("2d"),a=0;a<c*i.density;a++)b=new r,h.push(b);p()}function l(){var a=document.createElement("canvas");a.id="homeTopCanvas",j.appendChild(a),a.parentElement.style.overflow="hidden"}function m(){window.addEventListener("scroll",n,!1),window.addEventListener("resize",o,!1)}function n(){g=document.body.scrollTop>d?!1:!0}function o(){c=j.clientWidth,d=j.clientHeight,j.height=d+"px",e.width=c,e.height=d}function p(){if(g){f.clearRect(0,0,c,d);for(var a in h)h[a].draw()}requestAnimationFrame(p)}function q(){var a=Math.floor(255*Math.random()),b=Math.floor(255*Math.random()),c=Math.floor(255*Math.random()),d=Math.random().toPrecision(2);return"rgba("+a+", "+b+", "+c+", "+d+")"}function r(){function b(){a.pos.x=Math.random()*c,a.pos.y=d+100*Math.random(),a.alpha=.1+Math.random()*i.clearOffset,a.scale=.1+.3*Math.random(),a.speed=Math.random(),a.color="random"===i.color?q():i.color}var a=this;!function(){a.pos={},b()}(),this.draw=function(){a.alpha<=0&&b(),a.pos.y-=a.speed,a.alpha-=5e-4,f.beginPath(),f.arc(a.pos.x,a.pos.y,a.scale*i.radius,0,2*Math.PI,!1),f.fillStyle=a.color,f.fill(),f.closePath()}}var c,d,e,f,g=!0,h=[],i=a.extend({color:"rgba(255,255,255,.5)",radius:10,density:.3,clearOffset:.2},b),j=this["0"];k(),m()}}(jQuery);